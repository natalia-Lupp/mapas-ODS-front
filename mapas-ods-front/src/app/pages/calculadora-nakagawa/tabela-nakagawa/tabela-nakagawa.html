<form [formGroup]="formMetricas" *ngIf="formMetricas"
   class="space-y-10 p-6 bg-gradient-to-b from-[#e8f3ff] to-[#f7fbff] rounded-2xl shadow-lg">
   <!-- Contas Sanepar -->
   <section formArrayName="contasSanepar" class="space-y-6">
      <h2 class="text-2xl font-bold text-sky-700 border-b pb-2 mb-3">ðŸ’§ Contas Sanepar</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
         <div *ngFor="let linha of contasFormArray.controls; let i = index" [formGroupName]="i"
            class="bg-white p-4 rounded-xl shadow border border-blue-100 hover:shadow-md transition-shadow">
            <div class="grid grid-cols-2 gap-4">
               <div>
                  <label class="text-sm text-gray-600 font-semibold block mb-1">Data</label>
                  <input type="text" class="input input-bordered w-full" formControlName="mes" readonly />
               </div>
               <div>
                  <label class="text-sm text-gray-600 font-semibold block mb-1">Metros CÃºbicos</label>
                  <input type="text" class="input input-bordered w-full" formControlName="metrosCubicos" readonly />
               </div>
            </div>
         </div>
      </div>
   </section>

   <!-- Alunos Semestre -->
   <section formArrayName="alunosSemestre" class="space-y-6">
      <h2 class="text-2xl font-bold text-sky-700 border-b pb-2 mb-3">ðŸŽ“ Alunos por Semestre</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
         <div *ngFor="let linhaAlunos of alunosFormArray.controls; let i = index" [formGroupName]="i"
            class="bg-white p-4 rounded-xl shadow border border-blue-100 hover:shadow-md transition-shadow">
            <p class="font-bold text-blue-700 text-center mb-3">{{ linhaAlunos.value.nomeSemestre }}</p>
            <div class="grid grid-cols-2 gap-3">
               <div>
                  <label class="text-sm font-semibold text-gray-600 block">Geral</label>
                  <input type="text" class="input input-bordered w-full" formControlName="alunosSemestreGeral"
                     readonly />
               </div>
               <div>
                  <label class="text-sm font-semibold text-gray-600 block">Integral</label>
                  <input type="text" class="input input-bordered w-full" formControlName="alunosSemestreIntegral"
                     readonly />
               </div>
               <div>
                  <label class="text-sm font-semibold text-gray-600 block">Noturno</label>
                  <input type="text" class="input input-bordered w-full" formControlName="alunosSemestreNoturno"
                     readonly />
               </div>
               <div>
                  <label class="text-sm font-semibold text-gray-600 block">InÃ­cio</label>
                  <input type="text" class="input input-bordered w-full" formControlName="dataInicioSemestre"
                     readonly />
               </div>
               <div>
                  <label class="text-sm font-semibold text-gray-600 block">Fim</label>
                  <input type="text" class="input input-bordered w-full" formControlName="dataFimSemestre" readonly />
               </div>
            </div>
         </div>
      </div>
   </section>

   <!-- Eventos -->
   <section formArrayName="eventos" class="space-y-6">
      <h2 class="text-2xl font-bold text-sky-700 border-b pb-2 mb-3">ðŸŽ‰ Eventos</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
         <div *ngFor="let linhaEventos of eventosFormArray.controls; let i = index" [formGroupName]="i"
            class="bg-white p-4 rounded-xl shadow border border-blue-100 hover:shadow-md transition-shadow">
            <h3 class="text-blue-700 font-semibold text-lg mb-3">{{ linhaEventos.value.nomeEvento }}</h3>
            <div class="space-y-2">
               <div>
                  <label class="text-sm text-gray-600 font-semibold block">NÂ° Estimado Pessoas</label>
                  <input type="text" class="input input-bordered w-full" formControlName="numeroEstimadoPessoas"
                     readonly />
               </div>
               <div class="grid grid-cols-2 gap-3">
                  <div>
                     <label class="text-sm font-semibold text-gray-600 block">Data InÃ­cio</label>
                     <input type="text" class="input input-bordered w-full" formControlName="eventoDataInicio"
                        readonly />
                  </div>
                  <div>
                     <label class="text-sm font-semibold text-gray-600 block">Data Fim</label>
                     <input type="text" class="input input-bordered w-full" formControlName="eventoDataFim" readonly />
                  </div>
               </div>
            </div>
         </div>
      </div>
   </section>

   <!-- Outros -->
   <section formArrayName="outros" class="space-y-6">
      <h2 class="text-2xl font-bold text-sky-700 border-b pb-2 mb-3">ðŸ‘¥ Outros Colaboradores</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
         <div *ngFor="let linhasOutros of outroFormArray.controls; let i = index" [formGroupName]="i"
            class="bg-white p-4 rounded-xl shadow border border-blue-100 hover:shadow-md transition-shadow">
            <div class="grid grid-cols-2 gap-4">
               <div>
                  <label class="text-sm font-semibold text-gray-600 block">Aux. Administrativos</label>
                  <input type="text" class="input input-bordered w-full" formControlName="auxiliaresAdministrativos"
                     readonly />
               </div>
               <div>
                  <label class="text-sm font-semibold text-gray-600 block">Tercerizados</label>
                  <input type="text" class="input input-bordered w-full" formControlName="tercerizados" readonly />
               </div>
               <div>
                  <label class="text-sm font-semibold text-gray-600 block">Docentes</label>
                  <input type="text" class="input input-bordered w-full" formControlName="docentes" readonly />
               </div>
               <div>
                  <label class="text-sm font-semibold text-gray-600 block">Apelido</label>
                  <input type="text" class="input input-bordered w-full" formControlName="apelido" readonly />
               </div>
            </div>
         </div>
      </div>
   </section>
   <section>
      <div class="flex gap-4">
         <button type="button" class="btn btn-warning px-8" (click)="back()">
            Voltar
         </button>
         <button type="button" class="btn btn-info px-8" (click)="gerarRelatorio()" [disabled]="formMetricas.invalid">
            ðŸ“„ Gerar RelatÃ³rio
         </button>
         <button type="submit" class="btn btn-primary px-8" (click)="salvar()" [disabled]="formMetricas.invalid">
            Salvar
         </button>
      </div>
   </section>
</form>

<app-toast [mensagem]="toastMensagem" [tipoAlerta]="tipoAlerta" [show]="showToast"></app-toast>