<!-- Área principal -->
<div class="flex-1 flex flex-col min-h-screen">
   <!-- Navbar -->
   <app-navbar-adm></app-navbar-adm>

   <div class="drawer lg:drawer-open min-h-screen flex">
      <!-- Sidebar -->
      <app-sidebar class="hidden lg:block w-64"></app-sidebar>

      <main class="p-6 flex-1 bg-white">

         <!-- Título -->
         <h2 class="text-3xl font-semibold mb-2 text-gray-900">
            Gerenciar Semestres
         </h2>

         <!-- Botão -->
         <div class="flex justify-end mb-6">
            <button
               class="px-6 py-2 rounded-full font-semibold text-white bg-blue-700 hover:bg-blue-800 w-full sm:w-auto"
               (click)="cadastrar()">
               + Novo Semestre
            </button>
         </div>

         <!-- Card / Container -->
         <div class="card bg-white shadow-md border border-gray-200 rounded-2xl overflow-hidden">

            <table class="hidden sm:table custom-zebra w-full text-center text-gray-600">
               <thead class="bg-[#c9e2ff]">
                  <tr class="text-center">
                     <th class="font-extrabold text-gray-700">Semestre</th>
                     <th class="font-extrabold text-gray-700">Alunos Semestre</th>
                     <th class="font-extrabold text-gray-700">Alunos Integral</th>
                     <th class="font-extrabold text-gray-700">Alunos Noturnos</th>
                     <th class="font-extrabold text-gray-700 whitespace-nowrap">Data Início</th>
                     <th class="font-extrabold text-gray-700 whitespace-nowrap">Data Fim</th>
                     <th></th>
                  </tr>
               </thead>

               <tbody>
                  <tr class="text-center" *ngFor="let alunosDoSemestre of alunosSemestres">
                     <td>{{alunosDoSemestre.nome_semestre}}</td>
                     <td>{{alunosDoSemestre.quantidade_alunos_geral}}</td>
                     <td>{{alunosDoSemestre.quantidade_alunos_integral}}</td>
                     <td>{{alunosDoSemestre.quantidade_alunos_noturnos}}</td>
                     <td class="whitespace-nowrap">
                        {{alunosDoSemestre.data_inicio_semestre | date :"dd/MM/yyyy"}}
                     </td>
                     <td class="whitespace-nowrap">
                        {{alunosDoSemestre.data_fim_semestre | date :"dd/MM/yyyy"}}
                     </td>
                     <td class="flex justify-center gap-2 whitespace-nowrap">
                        <button class="btn btn-xs" (click)="atualizar(alunosDoSemestre.id)">
                           <i class="far fa-edit"></i>
                        </button>
                        <button class="btn btn-xs" (click)="deletar(alunosDoSemestre.id)">
                           <i class="fa-solid fa-trash"></i>
                        </button>
                     </td>
                  </tr>
               </tbody>
            </table>

            <!-- Versão mobile -->
            <div class="p-4 sm:hidden flex flex-col gap-4">
               <div *ngFor="let alunosDoSemestre of alunosSemestres"
                  class="bg-gray-50 p-4 border border-gray-200 rounded-lg shadow-sm">

                  <div class="flex justify-between items-start mb-2 border-b pb-2">
                     <div class="font-bold text-lg text-gray-800">
                        {{alunosDoSemestre.nome_semestre}}
                     </div>

                     <div class="flex gap-2">
                        <button class="btn btn-xs btn-ghost" (click)="atualizar(alunosDoSemestre.id)">
                           <i class="far fa-edit text-blue-500"></i>
                        </button>
                        <button class="btn btn-xs btn-ghost" (click)="deletar(alunosDoSemestre.id)">
                           <i class="fa-solid fa-trash text-red-500"></i>
                        </button>
                     </div>
                  </div>

                  <div class="grid grid-cols-2 gap-y-2 text-sm text-gray-600">
                     <div class="font-semibold text-gray-700">Geral:</div>
                     <div>{{alunosDoSemestre.quantidade_alunos_geral}}</div>

                     <div class="font-semibold text-gray-700">Integral:</div>
                     <div>{{alunosDoSemestre.quantidade_alunos_integral}}</div>

                     <div class="font-semibold text-gray-700">Noturno:</div>
                     <div>{{alunosDoSemestre.quantidade_alunos_noturnos}}</div>

                     <div class="font-semibold text-gray-700">Início:</div>
                     <div>{{alunosDoSemestre.data_inicio_semestre | date:"dd/MM/yyyy"}}</div>

                     <div class="font-semibold text-gray-700">Fim:</div>
                     <div>{{alunosDoSemestre.data_fim_semestre | date:"dd/MM/yyyy"}}</div>
                  </div>

               </div>

               <div *ngIf="!alunosSemestres || alunosSemestres.length === 0" class="text-center py-4 text-gray-500">
                  Nenhum semestre registrado.
               </div>
            </div>

         </div>

         <app-toast [mensagem]="toastMensagem" [tipoAlerta]="tipoAlertaToast" [show]="showToast">
         </app-toast>

      </main>
   </div>
</div>